
# -----------------  with-by.R ------------------------------------
> suppressPackageStartupMessages(library(summarytools))

> suppressPackageStartupMessages(library(dplyr))

> options(tibble.print_max = Inf)

# -----------------  with
> w1 <- with(tobacco, freq(gender, plain.ascii = F, weights = samp.wgts))

> view(w1, file = "01-with.md")
Switching method to 'pander'
Changing style to 'rmarkdown' for improved markdown compatibility
Output file written

> view(w1, file = "01-with.html")
Output file written

> (w2 <- with(tobacco, descr(BMI, transpose = TRUE)))
Descriptive Statistics  
tobacco$BMI  
N: 1000  

             Mean   Std.Dev    Min      Q1   Median      Q3     Max    MAD    IQR     CV   Skewness
--------- ------- --------- ------ ------- -------- ------- ------- ------ ------ ------ ----------
      BMI   25.73      4.49   8.83   22.93    25.62   28.65   39.44   4.18   5.72   0.17       0.02

Table: Table continues below

 

            SE.Skewness   Kurtosis   N.Valid   Pct.Valid
--------- ------------- ---------- --------- -----------
      BMI          0.08       0.26    974.00       97.40

> view(w2, footnote = "with, transpose", file = "02-with-transposed.html")
Output file written

> view(with(tobacco, ctable(gender, diseased, style = "grid")), method = "pander")
Cross-Tabulation, Row Proportions  
gender * diseased  
Data Frame: tobacco  

+--------+----------+-------------+-------------+---------------+
|        | diseased |         Yes |          No |         Total |
+--------+----------+-------------+-------------+---------------+
| gender |          |             |             |               |
+--------+----------+-------------+-------------+---------------+
|      F |          | 111 (22.7%) | 378 (77.3%) |  489 (100.0%) |
+--------+----------+-------------+-------------+---------------+
|      M |          | 110 (22.5%) | 379 (77.5%) |  489 (100.0%) |
+--------+----------+-------------+-------------+---------------+
|   <NA> |          |   3 (13.6%) |  19 (86.4%) |   22 (100.0%) |
+--------+----------+-------------+-------------+---------------+
|  Total |          | 224 (22.4%) | 776 (77.6%) | 1000 (100.0%) |
+--------+----------+-------------+-------------+---------------+

> (w3 <- with(tobacco, ctable(gender, diseased, style = "grid", prop = "C")))
Cross-Tabulation, Column Proportions  
gender * diseased  
Data Frame: tobacco  

+--------+----------+--------------+--------------+---------------+
|        | diseased |          Yes |           No |         Total |
+--------+----------+--------------+--------------+---------------+
| gender |          |              |              |               |
+--------+----------+--------------+--------------+---------------+
|      F |          | 111 ( 49.6%) | 378 ( 48.7%) |  489 ( 48.9%) |
+--------+----------+--------------+--------------+---------------+
|      M |          | 110 ( 49.1%) | 379 ( 48.8%) |  489 ( 48.9%) |
+--------+----------+--------------+--------------+---------------+
|   <NA> |          |    3 ( 1.3%) |   19 ( 2.4%) |    22 ( 2.2%) |
+--------+----------+--------------+--------------+---------------+
|  Total |          | 224 (100.0%) | 776 (100.0%) | 1000 (100.0%) |
+--------+----------+--------------+--------------+---------------+

> view(w3, method = "browser", footnote = "with, prop = c", file = "03-with-col-props.html")
Output file written

# -----------------  by
> bf1 <- stby(data = tobacco$diseased, INDICES = tobacco$smoker, FUN = freq)

> view(bf1, 'pander')
Frequencies  
tobacco$diseased  
Type: Factor  
Group: smoker = Yes  

              Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- ------ --------- -------------- --------- --------------
        Yes    125     41.95          41.95     41.95          41.95
         No    173     58.05         100.00     58.05         100.00
       <NA>      0                               0.00         100.00
      Total    298    100.00         100.00    100.00         100.00

Group: smoker = No  

              Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- ------ --------- -------------- --------- --------------
        Yes     99     14.10          14.10     14.10          14.10
         No    603     85.90         100.00     85.90         100.00
       <NA>      0                               0.00         100.00
      Total    702    100.00         100.00    100.00         100.00

> view(bf1, 'pander', headings = FALSE, plain.ascii = FALSE)
**Group:** smoker = Yes  

      &nbsp;   Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
------------ ------ --------- -------------- --------- --------------
     **Yes**    125     41.95          41.95     41.95          41.95
      **No**    173     58.05         100.00     58.05         100.00
  **\<NA\>**      0                               0.00         100.00
   **Total**    298    100.00         100.00    100.00         100.00

**Group:** smoker = No  

      &nbsp;   Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
------------ ------ --------- -------------- --------- --------------
     **Yes**     99     14.10          14.10     14.10          14.10
      **No**    603     85.90         100.00     85.90         100.00
  **\<NA\>**      0                               0.00         100.00
   **Total**    702    100.00         100.00    100.00         100.00

> print(bf1)
Frequencies  
tobacco$diseased  
Type: Factor  
Group: smoker = Yes  

              Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- ------ --------- -------------- --------- --------------
        Yes    125     41.95          41.95     41.95          41.95
         No    173     58.05         100.00     58.05         100.00
       <NA>      0                               0.00         100.00
      Total    298    100.00         100.00    100.00         100.00

Group: smoker = No  

              Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- ------ --------- -------------- --------- --------------
        Yes     99     14.10          14.10     14.10          14.10
         No    603     85.90         100.00     85.90         100.00
       <NA>      0                               0.00         100.00
      Total    702    100.00         100.00    100.00         100.00

> view(bf1, file = "04-by-freq.html", missing = "xxxx")
Output file written
Output file appended

# -----------------  with + by
> label(tobacco$BMI) <- "Body Mass Index"

> label(tobacco$diseased) <- "Subject has illness"

> view(stby(data = tobacco$diseased, INDICES = tobacco$smoker, FUN = freq), file = "05-with-and-by-freq.html")
Output file written
Output file appended

> view(stby(data = tobacco$BMI, INDICES = tobacco$gender, FUN = descr), file = "06-with-and-by-descr.md")
Switching method to 'pander'
Setting 'plain.ascii' to FALSE and Changing style to 'rmarkdown' for improved markdown compatibility
Output file written

> bf2 <- stby(iris$Species, iris$Sepal.Length > mean(iris$Sepal.Length), freq)

> view(bf2, 'pander')
Frequencies  
iris$Species  
Type: Factor  
Group: Sepal.Length > mean(Sepal.Length) = FALSE  

                   Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
---------------- ------ --------- -------------- --------- --------------
          setosa     50     62.50          62.50     62.50          62.50
      versicolor     24     30.00          92.50     30.00          92.50
       virginica      6      7.50         100.00      7.50         100.00
            <NA>      0                               0.00         100.00
           Total     80    100.00         100.00    100.00         100.00

Group: Sepal.Length > mean(Sepal.Length) = TRUE  

                   Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
---------------- ------ --------- -------------- --------- --------------
          setosa      0      0.00           0.00      0.00           0.00
      versicolor     26     37.14          37.14     37.14          37.14
       virginica     44     62.86         100.00     62.86         100.00
            <NA>      0                               0.00         100.00
           Total     70    100.00         100.00    100.00         100.00

> view(bf2, method = "browser", footnote = "condition for by", file = "07-by-calculated-freq.html")
Output file written
Output file appended

> bd1 <- stby(data = tobacco$BMI, INDICES = tobacco$gender, FUN = descr, style = "grid")

> view(bd1, headings = FALSE, method = "browser", footnote = "by, no headings", file = "08-by-descr-no-head.html")
Output file written

> view(bd1, method = 'pander')
Descriptive Statistics  
BMI by gender  
Data Frame: tobacco  
Label: Body Mass Index  
N: 489  

                         F        M
----------------- -------- --------
             Mean    26.10    25.31
          Std.Dev     4.95     3.98
              Min     9.01     8.83
               Q1    22.98    22.52
           Median    25.87    25.14
               Q3    29.48    27.96
              Max    39.44    36.76
              MAD     4.75     4.02
              IQR     6.49     5.44
               CV     0.19     0.16
         Skewness    -0.02    -0.04
      SE.Skewness     0.11     0.11
         Kurtosis     0.09     0.17
          N.Valid   475.00   477.00
        Pct.Valid    97.14    97.55

> bd2 <- stby(data = tobacco, INDICES = tobacco$gender, FUN = descr)

> view(bd2, method = "browser", file = "09-by-descr.html")
Non-numerical variable(s) ignored: gender, age.gr, smoker, diseased, disease
Output file written
Output file appended

> view(bd2, method = "pander", file = "09-by-descr-view.md")
Setting 'plain.ascii' to FALSE and Changing style to 'rmarkdown' for improved markdown compatibility
Non-numerical variable(s) ignored: gender, age.gr, smoker, diseased, disease
Output file written
Setting 'plain.ascii' to FALSE and Changing style to 'rmarkdown' for improved markdown compatibility
Output file appended

> label(tobacco) <- "Blabla"

> bd3 <- stby(data = tobacco, INDICES = tobacco$gender, FUN = descr)

> st_options(display.labels = FALSE)

> view(bd3, display.labels = T, method = "browser", footnote = "override option disp.labels = F", file = "10-by-descr.html")
Non-numerical variable(s) ignored: gender, age.gr, smoker, diseased, disease
Output file written
Output file appended

> print(bd3, file = "10-by-descr.md")
Setting 'plain.ascii' to FALSE and Changing style to 'rmarkdown' for improved markdown compatibility
Non-numerical variable(s) ignored: gender, age.gr, smoker, diseased, disease
Output file written
Setting 'plain.ascii' to FALSE and Changing style to 'rmarkdown' for improved markdown compatibility
Output file appended

> attach(tobacco)

> bd4 <- stby(data = BMI, INDICES = gender, FUN = descr)

> view(bd4, method = "browser", footnote = "stand-alone variable", file = "11-by-descr-standalone-var.html")
Output file written

> print(bd4, file = "11-by-descr-standalone-var.md")
Setting 'plain.ascii' to FALSE and Changing style to 'rmarkdown' for improved markdown compatibility
Output file written

> detach(tobacco)

# -----------------  cas particulier - by, 1 groupe seul.
> (b8 <- stby(iris, !is.na(iris$Species), descr))
Non-numerical variable(s) ignored: Species
Descriptive Statistics  
iris  
Group: !is.na(Species) = TRUE  
N: 150  

                    Petal.Length   Petal.Width   Sepal.Length   Sepal.Width
----------------- -------------- ------------- -------------- -------------
             Mean           3.76          1.20           5.84          3.06
          Std.Dev           1.77          0.76           0.83          0.44
              Min           1.00          0.10           4.30          2.00
               Q1           1.60          0.30           5.10          2.80
           Median           4.35          1.30           5.80          3.00
               Q3           5.10          1.80           6.40          3.30
              Max           6.90          2.50           7.90          4.40
              MAD           1.85          1.04           1.04          0.44
              IQR           3.50          1.50           1.30          0.50
               CV           0.47          0.64           0.14          0.14
         Skewness          -0.27         -0.10           0.31          0.31
      SE.Skewness           0.20          0.20           0.20          0.20
         Kurtosis          -1.42         -1.36          -0.61          0.14
          N.Valid         150.00        150.00         150.00        150.00
        Pct.Valid         100.00        100.00         100.00        100.00

> view(with(tobacco, descr(BMI, transpose = TRUE)), method = "browser", footnote = "with, transpose", file = "12.html")
Output file written

> attach(tobacco)

> view(stby(data = BMI, INDICES = gender, FUN = descr), method = "browser", file = "13.html") 
Output file written

> view(stby(data = BMI, INDICES = gender, FUN = descr), method = "pander", style = "rmarkdown") 
### Descriptive Statistics  
#### BMI by gender  
**N:** 489  

|          &nbsp; |      F |      M |
|----------------:|-------:|-------:|
|        **Mean** |  26.10 |  25.31 |
|     **Std.Dev** |   4.95 |   3.98 |
|         **Min** |   9.01 |   8.83 |
|          **Q1** |  22.98 |  22.52 |
|      **Median** |  25.87 |  25.14 |
|          **Q3** |  29.48 |  27.96 |
|         **Max** |  39.44 |  36.76 |
|         **MAD** |   4.75 |   4.02 |
|         **IQR** |   6.49 |   5.44 |
|          **CV** |   0.19 |   0.16 |
|    **Skewness** |  -0.02 |  -0.04 |
| **SE.Skewness** |   0.11 |   0.11 |
|    **Kurtosis** |   0.09 |   0.17 |
|     **N.Valid** | 475.00 | 477.00 |
|   **Pct.Valid** |  97.14 |  97.55 |

> view(stby(data = BMI, INDICES = gender, FUN = descr), method = "render") 
<div class="container st-container">
  <h3>Descriptive Statistics</h3>
  <h4> BMI by gender </h4>
  <strong>N</strong>: 489
  <br/>
  <table class="table table-bordered table-striped st-table st-table-bordered st-table-striped st-descr-table ">
  <thead>
    <tr>
      <th></th>
      <th align="center" class="st-protect-top-border">F</th>
      <th align="center" class="st-protect-top-border">M</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <strong>Mean</strong></td>
      <td><span>26.10</span></td>
      <td><span>25.31</span></td>
    </tr>
    <tr>
      <td>
        <strong>Std.Dev</strong></td>
      <td><span>4.95</span></td>
      <td><span>3.98</span></td>
    </tr>
    <tr>
      <td>
        <strong>Min</strong></td>
      <td><span>9.01</span></td>
      <td><span>8.83</span></td>
    </tr>
    <tr>
      <td>
        <strong>Q1</strong></td>
      <td><span>22.98</span></td>
      <td><span>22.52</span></td>
    </tr>
    <tr>
      <td>
        <strong>Median</strong></td>
      <td><span>25.87</span></td>
      <td><span>25.14</span></td>
    </tr>
    <tr>
      <td>
        <strong>Q3</strong></td>
      <td><span>29.48</span></td>
      <td><span>27.96</span></td>
    </tr>
    <tr>
      <td>
        <strong>Max</strong></td>
      <td><span>39.44</span></td>
      <td><span>36.76</span></td>
    </tr>
    <tr>
      <td>
        <strong>MAD</strong></td>
      <td><span>4.75</span></td>
      <td><span>4.02</span></td>
    </tr>
    <tr>
      <td>
        <strong>IQR</strong></td>
      <td><span>6.49</span></td>
      <td><span>5.44</span></td>
    </tr>
    <tr>
      <td>
        <strong>CV</strong></td>
      <td><span>0.19</span></td>
      <td><span>0.16</span></td>
    </tr>
    <tr>
      <td>
        <strong>Skewness</strong></td>
      <td><span>-0.02</span></td>
      <td><span>-0.04</span></td>
    </tr>
    <tr>
      <td>
        <strong>SE.Skewness</strong></td>
      <td><span>0.11</span></td>
      <td><span>0.11</span></td>
    </tr>
    <tr>
      <td>
        <strong>Kurtosis</strong></td>
      <td><span>0.09</span></td>
      <td><span>0.17</span></td>
    </tr>
    <tr>
      <td>
        <strong>N.Valid</strong></td>
      <td><span>475</span></td>
      <td><span>477</span></td>
    </tr>
    <tr>
      <td>
        <strong>Pct.Valid</strong></td>
      <td><span>97.14</span></td>
      <td><span>97.55</span></td>
    </tr>
  </tbody>
</table>
  <p>Generated by <a href='https://github.com/dcomtois/summarytools'>summarytools</a> 0.9.7 (<a href='https://www.r-project.org/'>R</a> version 3.6.3)<br/>2020-05-31</p>
</div>

> detach(tobacco)

> stby(tobacco, tobacco$gender, dfSummary)
Data Frame Summary  
tobacco  
Group: gender = F  
Dimensions: 489 x 9  
Duplicates: 0  

----------------------------------------------------------------------------------------------------------------
No   Variable       Stats / Values            Freqs (% of Valid)    Graph                  Valid      Missing   
---- -------------- ------------------------- --------------------- ---------------------- ---------- ----------
1    gender         1. F                      489 (100.0%)          IIIIIIIIIIIIIIIIIIII   489        0         
     [factor]       2. M                        0 (  0.0%)                                 (100%)     (0%)      

2    age            Mean (sd) : 49.6 (18.3)   63 distinct values    :     . . .   : . :    475        14        
     [numeric]      min < med < max:                                : : : : : : : : : :    (97.14%)   (2.86%)   
                    18 < 50 < 80                                    : : : : : : : : : :                         
                    IQR (CV) : 32 (0.4)                             : : : : : : : : : :                         
                                                                    : : : : : : : : : :                         

3    age.gr         1. 18-34                  123 (25.9%)           IIIII                  475        14        
     [factor]       2. 35-50                  118 (24.8%)           IIII                   (97.14%)   (2.86%)   
                    3. 51-70                  157 (33.1%)           IIIIII                                      
                    4. 71 +                    77 (16.2%)           III                                         

4    BMI            Mean (sd) : 26.1 (4.9)    475 distinct values           :              475        14        
     [numeric]      min < med < max:                                      : :              (97.14%)   (2.86%)   
                    9 < 25.9 < 39.4                                       : : .                                 
                    IQR (CV) : 6.5 (0.2)                                . : : :                                 
                                                                        : : : : .                               

5    smoker         1. Yes                    147 (30.1%)           IIIIII                 489        0         
     [factor]       2. No                     342 (69.9%)           IIIIIIIIIIIII          (100%)     (0%)      

6    cigs.per.day   Mean (sd) : 6.9 (12)      37 distinct values    :                      468        21        
     [numeric]      min < med < max:                                :                      (95.71%)   (4.29%)   
                    0 < 0 < 40                                      :                                           
                    IQR (CV) : 10.2 (1.8)                           :                                           
                                                                    : . . .   . . .                             

7    diseased       1. Yes                    111 (22.7%)           IIII                   489        0         
     [factor]       2. No                     378 (77.3%)           IIIIIIIIIIIIIII        (100%)     (0%)      

8    disease        1. Hypertension           18 (16.5%)            III                    109        380       
     [character]    2. Cancer                 16 (14.7%)            II                     (22.29%)   (77.71%)  
                    3. Cholesterol            10 ( 9.2%)            I                                           
                    4. Heart                   9 ( 8.3%)            I                                           
                    5. Pulmonary               9 ( 8.3%)            I                                           
                    6. Diabetes                8 ( 7.3%)            I                                           
                    7. Musculoskeletal         8 ( 7.3%)            I                                           
                    8. Hypotension             7 ( 6.4%)            I                                           
                    9. Neurological            7 ( 6.4%)            I                                           
                    10. Vision                 6 ( 5.5%)            I                                           
                    [ 3 others ]              11 (10.1%)            II                                          

9    samp.wgts      Mean (sd) : 1 (0.1)       0.86!: 131 (26.8%)    IIIII                  489        0         
     [numeric]      min < med < max:          1.04!: 120 (24.5%)    IIII                   (100%)     (0%)      
                    0.9 < 1 < 1.1             1.05!: 160 (32.7%)    IIIIII                                      
                    IQR (CV) : 0.2 (0.1)      1.06!:  78 (16.0%)    III                                         
                                              ! rounded                                                         
----------------------------------------------------------------------------------------------------------------

Group: gender = M  
Dimensions: 489 x 9  
Duplicates: 2  

----------------------------------------------------------------------------------------------------------------
No   Variable       Stats / Values            Freqs (% of Valid)    Graph                  Valid      Missing   
---- -------------- ------------------------- --------------------- ---------------------- ---------- ----------
1    gender         1. F                        0 (  0.0%)                                 489        0         
     [factor]       2. M                      489 (100.0%)          IIIIIIIIIIIIIIIIIIII   (100%)     (0%)      

2    age            Mean (sd) : 49.6 (18.3)   63 distinct values          .     .   . :    478        11        
     [numeric]      min < med < max:                                : : : : :   : : : :    (97.75%)   (2.25%)   
                    18 < 49.5 < 80                                  : : : : : : : : : :                         
                    IQR (CV) : 32 (0.4)                             : : : : : : : : : :                         
                                                                    : : : : : : : : : :                         

3    age.gr         1. 18-34                  130 (27.2%)           IIIII                  478        11        
     [factor]       2. 35-50                  118 (24.7%)           IIII                   (97.75%)   (2.25%)   
                    3. 51-70                  151 (31.6%)           IIIIII                                      
                    4. 71 +                    79 (16.5%)           III                                         

4    BMI            Mean (sd) : 25.3 (4)      477 distinct values             : .          477        12        
     [numeric]      min < med < max:                                          : :          (97.55%)   (2.45%)   
                    8.8 < 25.1 < 36.8                                       : : : .                             
                    IQR (CV) : 5.4 (0.2)                                    : : : : .                           
                                                                          : : : : : :                           

5    smoker         1. Yes                    143 (29.2%)           IIIII                  489        0         
     [factor]       2. No                     346 (70.8%)           IIIIIIIIIIIIII         (100%)     (0%)      

6    cigs.per.day   Mean (sd) : 6.7 (11.8)    36 distinct values    :                      475        14        
     [numeric]      min < med < max:                                :                      (97.14%)   (2.86%)   
                    0 < 0 < 40                                      :                                           
                    IQR (CV) : 11 (1.8)                             :                                           
                                                                    :   .   . . . .                             

7    diseased       1. Yes                    110 (22.5%)           IIII                   489        0         
     [factor]       2. No                     379 (77.5%)           IIIIIIIIIIIIIII        (100%)     (0%)      

8    disease        1. Cancer                 18 (16.4%)            III                    110        379       
     [character]    2. Hypertension           17 (15.5%)            III                    (22.49%)   (77.51%)  
                    3. Cholesterol            11 (10.0%)            II                                          
                    4. Heart                  11 (10.0%)            II                                          
                    5. Pulmonary              11 (10.0%)            II                                          
                    6. Musculoskeletal        10 ( 9.1%)            I                                           
                    7. Hearing                 9 ( 8.2%)            I                                           
                    8. Digestive               7 ( 6.4%)            I                                           
                    9. Diabetes                5 ( 4.5%)                                                        
                    10. Hypotension            4 ( 3.6%)                                                        
                    [ 3 others ]               7 ( 6.4%)            I                                           

9    samp.wgts      Mean (sd) : 1 (0.1)       0.86!: 131 (26.8%)    IIIII                  489        0         
     [numeric]      min < med < max:          1.04!: 124 (25.4%)    IIIII                  (100%)     (0%)      
                    0.9 < 1 < 1.1             1.05!: 155 (31.7%)    IIIIII                                      
                    IQR (CV) : 0.2 (0.1)      1.06!:  79 (16.2%)    III                                         
                                              ! rounded                                                         
----------------------------------------------------------------------------------------------------------------

> stby(tobacco, tobacco$gender, descr)
Non-numerical variable(s) ignored: gender, age.gr, smoker, diseased, disease
Descriptive Statistics  
tobacco  
Group: gender = F  
N: 489  

                       age      BMI   cigs.per.day   samp.wgts
----------------- -------- -------- -------------- -----------
             Mean    49.56    26.10           6.88        1.00
          Std.Dev    18.28     4.95          12.04        0.08
              Min    18.00     9.01           0.00        0.86
               Q1    34.00    22.98           0.00        0.86
           Median    50.00    25.87           0.00        1.04
               Q3    66.00    29.48          10.50        1.05
              Max    80.00    39.44          40.00        1.06
              MAD    23.72     4.75           0.00        0.01
              IQR    32.00     6.49          10.25        0.19
               CV     0.37     0.19           1.75        0.08
         Skewness    -0.04    -0.02           1.53       -1.03
      SE.Skewness     0.11     0.11           0.11        0.11
         Kurtosis    -1.25     0.09           0.85       -0.92
          N.Valid   475.00   475.00         468.00      489.00
        Pct.Valid    97.14    97.14          95.71      100.00

Group: gender = M  
N: 489  

                       age      BMI   cigs.per.day   samp.wgts
----------------- -------- -------- -------------- -----------
             Mean    49.58    25.31           6.72        1.00
          Std.Dev    18.34     3.98          11.83        0.08
              Min    18.00     8.83           0.00        0.86
               Q1    34.00    22.52           0.00        0.86
           Median    49.50    25.14           0.00        1.04
               Q3    66.00    27.96          11.00        1.05
              Max    80.00    36.76          40.00        1.06
              MAD    24.46     4.02           0.00        0.01
              IQR    32.00     5.44          11.00        0.19
               CV     0.37     0.16           1.76        0.08
         Skewness    -0.04    -0.04           1.54       -1.03
      SE.Skewness     0.11     0.11           0.11        0.11
         Kurtosis    -1.27     0.17           0.92       -0.92
          N.Valid   478.00   477.00         475.00      489.00
        Pct.Valid    97.75    97.55          97.14      100.00

> stby(tobacco$disease, list(tobacco$smoker, tobacco$gender), freq)
Frequencies  
tobacco$disease  
Type: Factor  
Group: smoker = Yes, gender = F  

                        Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
--------------------- ------ --------- -------------- --------- --------------
               Cancer     10     16.39          16.39      6.80           6.80
          Cholesterol      6      9.84          26.23      4.08          10.88
             Diabetes      3      4.92          31.15      2.04          12.93
            Digestive      2      3.28          34.43      1.36          14.29
              Hearing      2      3.28          37.70      1.36          15.65
                Heart      9     14.75          52.46      6.12          21.77
         Hypertension      8     13.11          65.57      5.44          27.21
          Hypotension      4      6.56          72.13      2.72          29.93
      Musculoskeletal      3      4.92          77.05      2.04          31.97
         Neurological      3      4.92          81.97      2.04          34.01
                Other      1      1.64          83.61      0.68          34.69
            Pulmonary      8     13.11          96.72      5.44          40.14
               Vision      2      3.28         100.00      1.36          41.50
                 <NA>     86                              58.50         100.00
                Total    147    100.00         100.00    100.00         100.00

Group: smoker = No, gender = F  

                        Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
--------------------- ------ --------- -------------- --------- --------------
               Cancer      6     12.50          12.50      1.75           1.75
          Cholesterol      4      8.33          20.83      1.17           2.92
             Diabetes      5     10.42          31.25      1.46           4.39
            Digestive      3      6.25          37.50      0.88           5.26
              Hearing      3      6.25          43.75      0.88           6.14
                Heart      0      0.00          43.75      0.00           6.14
         Hypertension     10     20.83          64.58      2.92           9.06
          Hypotension      3      6.25          70.83      0.88           9.94
      Musculoskeletal      5     10.42          81.25      1.46          11.40
         Neurological      4      8.33          89.58      1.17          12.57
                Other      0      0.00          89.58      0.00          12.57
            Pulmonary      1      2.08          91.67      0.29          12.87
               Vision      4      8.33         100.00      1.17          14.04
                 <NA>    294                              85.96         100.00
                Total    342    100.00         100.00    100.00         100.00

Group: smoker = Yes, gender = M  

                        Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
--------------------- ------ --------- -------------- --------- --------------
               Cancer     12     19.05          19.05      8.39           8.39
          Cholesterol      6      9.52          28.57      4.20          12.59
             Diabetes      1      1.59          30.16      0.70          13.29
            Digestive      4      6.35          36.51      2.80          16.08
              Hearing      4      6.35          42.86      2.80          18.88
                Heart      6      9.52          52.38      4.20          23.08
         Hypertension     10     15.87          68.25      6.99          30.07
          Hypotension      1      1.59          69.84      0.70          30.77
      Musculoskeletal      4      6.35          76.19      2.80          33.57
         Neurological      2      3.17          79.37      1.40          34.97
                Other      0      0.00          79.37      0.00          34.97
            Pulmonary     10     15.87          95.24      6.99          41.96
               Vision      3      4.76         100.00      2.10          44.06
                 <NA>     80                              55.94         100.00
                Total    143    100.00         100.00    100.00         100.00

Group: smoker = No, gender = M  

                        Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
--------------------- ------ --------- -------------- --------- --------------
               Cancer      6     12.77          12.77      1.73           1.73
          Cholesterol      5     10.64          23.40      1.45           3.18
             Diabetes      4      8.51          31.91      1.16           4.34
            Digestive      3      6.38          38.30      0.87           5.20
              Hearing      5     10.64          48.94      1.45           6.65
                Heart      5     10.64          59.57      1.45           8.09
         Hypertension      7     14.89          74.47      2.02          10.12
          Hypotension      3      6.38          80.85      0.87          10.98
      Musculoskeletal      6     12.77          93.62      1.73          12.72
         Neurological      1      2.13          95.74      0.29          13.01
                Other      1      2.13          97.87      0.29          13.29
            Pulmonary      1      2.13         100.00      0.29          13.58
               Vision      0      0.00         100.00      0.00          13.58
                 <NA>    299                              86.42         100.00
                Total    346    100.00         100.00    100.00         100.00

# -----------------  with + by
> wb1 <- with(tobacco, stby(data = diseased, INDICES = smoker, FUN = freq)) 

> view(wb1, method = "pander", caption = "with + by")
Frequencies  
tobacco$diseased  
Type: Factor  
Group: smoker = Yes  

              Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- ------ --------- -------------- --------- --------------
        Yes    125     41.95          41.95     41.95          41.95
         No    173     58.05         100.00     58.05         100.00
       <NA>      0                               0.00         100.00
      Total    298    100.00         100.00    100.00         100.00

Table: with + by

Group: smoker = No  

              Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- ------ --------- -------------- --------- --------------
        Yes     99     14.10          14.10     14.10          14.10
         No    603     85.90         100.00     85.90         100.00
       <NA>      0                               0.00         100.00
      Total    702    100.00         100.00    100.00         100.00

Table: with + by

> view(wb1, method = "browser", footnote = "with + by", file = "14.html")
Output file written
Output file appended

> view(wb1, headings = FALSE, footnote = "no headings", file = "15.html")
Output file written
Output file appended

> view(wb1, headings = FALSE, footnote = "no headings", method = "pander") 
Group: smoker = Yes  

              Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- ------ --------- -------------- --------- --------------
        Yes    125     41.95          41.95     41.95          41.95
         No    173     58.05         100.00     58.05         100.00
       <NA>      0                               0.00         100.00
      Total    298    100.00         100.00    100.00         100.00

Group: smoker = No  

              Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- ------ --------- -------------- --------- --------------
        Yes     99     14.10          14.10     14.10          14.10
         No    603     85.90         100.00     85.90         100.00
       <NA>      0                               0.00         100.00
      Total    702    100.00         100.00    100.00         100.00

> wb2 <- with(tobacco, stby(data = BMI, INDICES = gender, FUN = descr)) 

> view(wb2, method = "pander")
Descriptive Statistics  
BMI by gender  
Data Frame: tobacco  
N: 489  

                         F        M
----------------- -------- --------
             Mean    26.10    25.31
          Std.Dev     4.95     3.98
              Min     9.01     8.83
               Q1    22.98    22.52
           Median    25.87    25.14
               Q3    29.48    27.96
              Max    39.44    36.76
              MAD     4.75     4.02
              IQR     6.49     5.44
               CV     0.19     0.16
         Skewness    -0.02    -0.04
      SE.Skewness     0.11     0.11
         Kurtosis     0.09     0.17
          N.Valid   475.00   477.00
        Pct.Valid    97.14    97.55

> view(wb2, method = "browser", footnote = "with + by", file = "16.html")
Output file written

> view(with(tobacco, stby(data = BMI, INDICES = gender, FUN = descr, stats = "fivenum")), method = "browser", footnote = "with + by fivenum", file = "17.html")
Output file written

> (b5 <- with(tobacco, stby(BMI, age.gr, descr, stats = c("mean", "sd", "min", "med", "max"))))
Descriptive Statistics  
BMI by age.gr  
Data Frame: tobacco  
N: 258  

                18-34   35-50   51-70    71 +
------------- ------- ------- ------- -------
         Mean   23.84   25.11   26.91   27.45
      Std.Dev    4.23    4.34    4.26    4.37
          Min    8.83   10.35    9.01   16.36
       Median   24.04   25.11   26.77   27.52
          Max   34.84   39.44   39.21   38.37

> print(b5, "pander", style = "rmarkdown") 
### Descriptive Statistics  
#### BMI by age.gr  
**Data Frame:** tobacco  
**N:** 258  

|      &nbsp; | 18-34 | 35-50 | 51-70 |  71 + |
|------------:|------:|------:|------:|------:|
|    **Mean** | 23.84 | 25.11 | 26.91 | 27.45 |
| **Std.Dev** |  4.23 |  4.34 |  4.26 |  4.37 |
|     **Min** |  8.83 | 10.35 |  9.01 | 16.36 |
|  **Median** | 24.04 | 25.11 | 26.77 | 27.52 |
|     **Max** | 34.84 | 39.44 | 39.21 | 38.37 |

> b6 <- with(tobacco, stby(BMI, age.gr, descr, stats = c("mean", "sd", "min", "max"), transpose = TRUE))

> view(b6, "pander") 
Descriptive Statistics  
BMI by age.gr  
Data Frame: tobacco  
N: 258  

               Mean   Std.Dev     Min     Max
----------- ------- --------- ------- -------
      18-34   23.84      4.23    8.83   34.84
      35-50   25.11      4.34   10.35   39.44
      51-70   26.91      4.26    9.01   39.21
       71 +   27.45      4.37   16.36   38.37

> view(b6, method = "browser", footnote = "4 stats", file = "18.html")
Output file written

> with(tobacco, view(stby(data = diseased, INDICES = smoker, FUN = freq, totals = F), method = "browser", footnote = "with + by", file = "19.html"))
Output file written
Output file appended

> view(with(tobacco, stby(data = BMI, INDICES = gender, FUN = descr)), method = "browser", file = "20.html")
Output file written

> with(tobacco, view(stby(data = BMI, INDICES = gender, FUN = descr), method = "pander"))
Descriptive Statistics  
BMI by gender  
Data Frame: tobacco  
N: 489  

                         F        M
----------------- -------- --------
             Mean    26.10    25.31
          Std.Dev     4.95     3.98
              Min     9.01     8.83
               Q1    22.98    22.52
           Median    25.87    25.14
               Q3    29.48    27.96
              Max    39.44    36.76
              MAD     4.75     4.02
              IQR     6.49     5.44
               CV     0.19     0.16
         Skewness    -0.02    -0.04
      SE.Skewness     0.11     0.11
         Kurtosis     0.09     0.17
          N.Valid   475.00   477.00
        Pct.Valid    97.14    97.55

# -----------------  Ouverture dans viewer
> view(b8, method = "viewer")
Non-numerical variable(s) ignored: Species
Output file written

# -----------------  by + weights
> with(tobacco, stby(smoker, gender, freq, weights = samp.wgts))
Weighted Frequencies  
tobacco$smoker  
Type: Factor  
Weights: samp.wgts  
Group: gender = F  

                Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- -------- --------- -------------- --------- --------------
        Yes   147.39     30.14          30.14     30.14          30.14
         No   341.54     69.86         100.00     69.86         100.00
       <NA>     0.00                               0.00         100.00
      Total   488.92    100.00         100.00    100.00         100.00

Group: gender = M  

                Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- -------- --------- -------------- --------- --------------
        Yes   142.86     29.22          29.22     29.22          29.22
         No   346.05     70.78         100.00     70.78         100.00
       <NA>     0.00                               0.00         100.00
      Total   488.92    100.00         100.00    100.00         100.00

> with(tobacco, stby(list(x=gender, y=smoker), age.gr, ctable, weights = samp.wgts))
Cross-Tabulation, Row Proportions  
gender * smoker  
Data Frame: tobacco  
Group: age.gr = 18-34  

-------- -------- -------------- --------------- ----------------
           smoker            Yes              No            Total
  gender                                                         
       F            29.3 (27.6%)    76.7 (72.4%)   106.0 (100.0%)
       M            32.7 (29.2%)    79.3 (70.8%)   112.0 (100.0%)
    <NA>             1.7 (40.0%)     2.6 (60.0%)     4.3 (100.0%)
   Total            63.7 (28.7%)   158.5 (71.3%)   222.2 (100.0%)
-------- -------- -------------- --------------- ----------------

Group: age.gr = 35-50  

-------- -------- -------------- --------------- ----------------
           smoker            Yes              No            Total
  gender                                                         
       F            40.7 (33.1%)    82.5 (66.9%)   123.2 (100.0%)
       M            32.4 (26.3%)    90.8 (73.7%)   123.2 (100.0%)
    <NA>             2.1 (40.0%)     3.1 (60.0%)     5.2 (100.0%)
   Total            75.2 (29.9%)   176.5 (70.1%)   251.6 (100.0%)
-------- -------- -------------- --------------- ----------------

Group: age.gr = 51-70  

-------- -------- --------------- --------------- ----------------
           smoker             Yes              No            Total
  gender                                                          
       F             50.4 (30.6%)   114.4 (69.4%)   164.8 (100.0%)
       M             50.4 (31.8%)   108.1 (68.2%)   158.5 (100.0%)
    <NA>              3.1 (33.3%)     6.3 (66.7%)     9.4 (100.0%)
   Total            103.9 (31.2%)   228.8 (68.8%)   332.7 (100.0%)
-------- -------- --------------- --------------- ----------------

Group: age.gr = 71 +  

-------- -------- -------------- --------------- ----------------
           smoker            Yes              No            Total
  gender                                                         
       F            22.3 (27.3%)    59.5 (72.7%)    81.8 (100.0%)
       M            24.4 (29.1%)    59.5 (70.9%)    83.9 (100.0%)
    <NA>             1.1 (33.3%)     2.1 (66.7%)     3.2 (100.0%)
   Total            47.8 (28.3%)   121.1 (71.7%)   168.9 (100.0%)
-------- -------- -------------- --------------- ----------------

> tobacco %>% group_by(gender) %>% freq(smoker, weights = samp.wgts)
Weighted Frequencies  
tobacco$smoker  
Type: Factor  
Weights: samp.wgts  
Group: gender = F  

                Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- -------- --------- -------------- --------- --------------
        Yes   147.39     30.14          30.14     30.14          30.14
         No   341.54     69.86         100.00     69.86         100.00
       <NA>     0.00                               0.00         100.00
      Total   488.92    100.00         100.00    100.00         100.00

Group: gender = M  

                Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- -------- --------- -------------- --------- --------------
        Yes   142.86     29.22          29.22     29.22          29.22
         No   346.05     70.78         100.00     70.78         100.00
       <NA>     0.00                               0.00         100.00
      Total   488.92    100.00         100.00    100.00         100.00

Group: gender = NA  

               Freq   % Valid   % Valid Cum.   % Total   % Total Cum.
----------- ------- --------- -------------- --------- --------------
        Yes    8.02     36.20          36.20     36.20          36.20
         No   14.14     63.80         100.00     63.80         100.00
       <NA>    0.00                               0.00         100.00
      Total   22.16    100.00         100.00    100.00         100.00

> st_options("reset")
summarytools options have been reset

> detach("package:summarytools")

> detach("package:dplyr")
